# 최종 데미지 공식 정리 (2025년 11월 4일 기준)

---

## 1. 캐릭터 데미지

### 1-1. 기본 공격 데미지 (비치명타)
캐릭터의 기본 공격력에 최종 증폭률을 곱하여 계산합니다.
*   **공식:** `공격력 * (1 + (상태창 공격력 증폭 - 100) / 100)`
*   **설명:** 상태창의 공격력 증폭은 정령 버프 등이 모두 합산된 수치입니다. 여기서 기본값 100%를 빼주어야 실제 증폭률이 계산됩니다.

### 1-2. 치명타 공격 데미지
기본 공격 데미지에 치명타 증폭 수치를 배율로 적용합니다.
*   **공식:** `기본 공격 데미지 * (치명타 증폭 % / 100)`
*   **설명:** 예를 들어 치명타 증폭이 220%라면, 기본 데미지의 2.2배가 됩니다.

### 1-3. 캐릭터 평균 공격 데미지 및 DPS
치명타 확률과 피해량을 모두 고려한 평균 기대 데미지입니다.
*   **평균 데미지 공식:** `비치명타 데미지 * (1 - 치명타 확률) + 치명타 데미지 * 치명타 확률`
*   **DPS 공식:** `평균 데미지 * 캐릭터 공격 속도`

---

## 2. 정령 데미지

### 2-1. 정령 평타 데미지
캐릭터의 비치명타 기본 데미지를 기반으로, 정령의 고유 능력치와 모든 증폭 효과를 합산한 최종 배율을 곱하여 계산합니다.
*   **공식:** `캐릭터 기본 데미지 (비치명타) * (정령 계수 + 정령공격력증폭/100 + 최종속성증폭/100)`
*   **설명:** 인게임 설명의 '합연산'은, 단순 덧셈이 아니라 계수와 증폭률(%)을 위와 같은 특수한 방식으로 더하는 것을 의미합니다.
*   **참고 (최종 속성 증폭):** 캐릭터의 스탯(빛 타입 증폭 등)과 팀 내 다른 정령이 주는 속성 버프(광정령 타입 공격력 증가 등)를 모두 합산한 값입니다.

### 2-2. 정령 스킬 데미지
정령의 평타 데미지를 기반으로, 스킬의 타격당 계수만큼의 배율을 적용합니다.
*   **1타당 데미지 공식:** `정령 평타 데미지 * (스킬 총 계수 % / 타격 횟수 / 100)`
*   **설명:** 예를 들어 '600% 데미지를 6번' 주는 스킬은, 평타 데미지의 100%만큼의 피해를 6번 주는 것으로 계산됩니다.

### 2-3. 정령 DPS (평타 및 스킬)
시뮬레이션 시간(`simTime`) 동안의 총 데미지를 기반으로 DPS를 계산합니다.
*   **평타 DPS:** `정령 평타 데미지 * 정령 공격 속도` (단, 공격속도가 0인 정령은 0)
*   **스킬 시전 횟수:** `floor(시뮬레이션 시간 / 스킬 쿨타임)`
*   **스킬 총 데미지:** `스킬 1타당 데미지 * 타격 횟수 * 스킬 시전 횟수`
*   **스킬 DPS:** `스킬 총 데미지 / 시뮬레이션 시간`

---

## 3. 캐릭터 스킬 데미지

### 3-1. 캐릭터 스킬 데미지 (비치명타)
캐릭터의 비치명타 기본 데미지를 기반으로, 스킬의 고유 계수만큼 배율을 적용하여 계산합니다.
*   **공식:** `캐릭터 기본 공격 데미지 (비치명타) * (스킬 계수 % / 100)`

### 3-2. 캐릭터 스킬 데미지 (치명타)
캐릭터 스킬의 비치명타 데미지에 캐릭터의 치명타 증폭 수치를 배율로 적용합니다.
*   **공식:** `캐릭터 스킬 데미지 (비치명타) * (치명타 증폭 % / 100)`

### 3-3. 캐릭터 스킬 DPS
시뮬레이션 시간(`simTime`) 동안의 총 데미지를 기반으로 DPS를 계산합니다.
*   **스킬 평균 데미지 (1타당):** `비치명타 스킬 데미지 * (1 - 치명타 확률) + 치명타 스킬 데미지 * 치명타 확률`
*   **스킬 시전 횟수:** `floor(시뮬레이션 시간 / 스킬 쿨타임)`
*   **스킬 총 데미지:** `스킬 평균 데미지 * 타격 횟수 * 스킬 시전 횟수`
*   **스킬 DPS:** `스킬 총 데미지 / 시뮬레이션 시간`
